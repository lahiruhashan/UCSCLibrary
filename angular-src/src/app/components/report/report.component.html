<div class="container">
  <div class="content">
    <mat-toolbar>Fines Report of {{newSelected}}</mat-toolbar>
    <mat-form-field style="width: 200px; margin-left: 15px">
      <mat-select [(value)]="selected">
        <mat-option value="Today">Today</mat-option>
        <mat-option value="Last 7 Days">Last 7 Days</mat-option>
        <mat-option value="Last 30 Days">Last 30 Days</mat-option>
        <mat-option value="Last Year">Last Year</mat-option>
        <mat-option value="All Times">All</mat-option>
      </mat-select>
    </mat-form-field>
    <button (click)="dropDownFilter()" style="margin-left: 20px" mat-raised-button color="primary">Filter</button>
    <button (click)="downloadFinesPdf()" style="margin-left: 20px; margin-right: 10px; float: right " mat-raised-button color="primary">Download This As PDF</button>
    <div class="loading-shade"
         *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSourceFine" matSort>

        <ng-container matColumnDef="Student Index" cdkColumnDef="indexNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Index Number </th>
          <td mat-cell *matCellDef="let row"> {{row.indexNumber}} </td>
          <td mat-footer-cell *matFooterCellDef>Total</td>
        </ng-container>

        <ng-container matColumnDef="Book Name" cdkColumnDef="bookName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Book Name </th>
          <td mat-cell *matCellDef="let row"> {{row.bookName}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="Date Paid" cdkColumnDef="datePaid">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Date Paid  </th>
          <td mat-cell *matCellDef="let row"> {{row.datePaid}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="Amount" cdkColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Amount (LKR)</th>
          <td mat-cell *matCellDef="let row"> {{row.amount}} </td>
          <td mat-footer-cell *matFooterCellDef> {{totalFine.toFixed(2)}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr mat-footer-row style="font-weight: bold;" *matFooterRowDef="displayedColumns; sticky: true"></tr>
      </table>

      <mat-paginator #paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
  <div class="content">
    <mat-toolbar>Books Report of {{newSelectedBook}}</mat-toolbar>
    <mat-form-field style="width: 200px; margin-left: 15px">
      <mat-select [(value)]="selectedBook">
        <mat-option value="Today">Today</mat-option>
        <mat-option value="Last 7 Days">Last 7 Days</mat-option>
        <mat-option value="Last 30 Days">Last 30 Days</mat-option>
        <mat-option value="Last Year">Last Year</mat-option>
        <mat-option value="All Times">All</mat-option>
      </mat-select>
    </mat-form-field>
    <button (click)="dropDownFilterBook()" style="margin-left: 20px" mat-raised-button color="primary">Filter</button>
    <button (click)="downloadBooksPdf()" style="margin-left: 20px; margin-right: 10px; float: right " mat-raised-button color="primary">Download This As PDF</button>
    <div class="loading-shade"
         *ngIf="isLoadingResultsBook">
      <mat-spinner *ngIf="isLoadingResultsBook"></mat-spinner>
    </div>
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSourceBook" matSort>

        <ng-container matColumnDef="Book Name" cdkColumnDef="bookName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Book Name </th>
          <td mat-cell *matCellDef="let row"> {{row.bookName}} </td>
          <td mat-footer-cell *matFooterCellDef>Total Books</td>
        </ng-container>

        <ng-container matColumnDef="Author" cdkColumnDef="author">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
          <td mat-cell *matCellDef="let row"> {{row.author}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="Publisher" cdkColumnDef="publisher">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Publisher </th>
          <td mat-cell *matCellDef="let row"> {{row.publisher}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="Added Date" cdkColumnDef="addedDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Added On </th>
          <td mat-cell *matCellDef="let row"> {{row.dateAdded}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="Copies" cdkColumnDef="copies">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Copies</th>
          <td mat-cell *matCellDef="let row"> {{row.copies}} </td>
          <td mat-footer-cell *matFooterCellDef> {{totalBooks}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsBook"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsBook;"></tr>
        <tr mat-footer-row style="font-weight: bold" *matFooterRowDef="displayedColumnsBook; sticky: true"></tr>
      </table>

      <mat-paginator #paginatorBook [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>

